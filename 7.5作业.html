<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>top 10</title>
</head>
<link rel="stylesheet" type="text/css" href="7.5作业.css">
<body>
	<ul id="ls"></ul>
	<script type="module">
		const tops = await fetch("https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty").then(res => res.json())
		const list = tops.slice(0,10);
		const newslist = document.getElementById("ls")

		for(const id of list){
			const story = await fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json?print=pretty`).then(res => res.json())
			const li = document.createElement("li")
			li.className = "li"
			//创建投票数量显示
			const score = document.createElement("span")
			score.className = "score"
			score.innerText = story.score
			//创建标题
			const title = document.createElement("span")
			title.className = "title"
			const titleLink = document.createElement("a")
			titleLink.innerText = story.title
			titleLink.href = story.url
			titleLink.className = "titleLink"
			titleLink.target = "_blank"
			title.append(titleLink)
			const host = document.createElement("span")
			const hostname = new URL(story.url).host
			host.className = "host"
			host.innerText = `(${hostname})`
			title.append(host)
			//创建元数据
			const meta = document.createElement("span")
			meta.className = "meta"
			//创建提交者信息
			const by = document.createElement("span")
			by.innerText = "\nby "
			const byAuthor = document.createElement("a")
			byAuthor.innerText = story.by
			byAuthor.href = ""
			byAuthor.className="byAuthor"
			by.append(byAuthor);
			const kg = document.createElement("span")
			kg.innerText =" ";
			by.append(kg)
			//创建时间
			const now = Math.floor(new Date().getTime()/1000);
			const past = now - story.time;
			const time = document.createElement("span")
			time.innerText = `${past} seconds ago`
			time.className = "time"
			//创建分割线
			const delimeter = document.createElement("span")
			delimeter.innerText = " | "
			const comments = document.createElement("a")
			comments.innerText = `${story.kids.length} comments`
			comments.href = ""
			comments.className = "comments"
			
			meta.append(by,time,delimeter,comments)
			li.append(score,title,meta)
			newslist.append(li)
		}
	</script>
</body>
</html>